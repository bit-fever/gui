<div class="main-layout">

  <mat-accordion class="left-layout" multi>
    <mat-expansion-panel [expanded]="filters.posProEnabled" hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>{{loc("positiveProfit")}}
          <span class="filler"></span>
          <mat-icon>functions</mat-icon>
          <mat-slide-toggle (change)="onPositiveProfitChange($event)" [checked]="filters.posProEnabled" (click)="$event.stopPropagation()"></mat-slide-toggle>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <mat-form-field>
        <mat-label>{{loc("days")}}</mat-label>
        <input matInput type="number" min="1" max="300" required [(ngModel)]="filters.posProDays">
      </mat-form-field>
    </mat-expansion-panel>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <mat-expansion-panel [expanded]="filters.oldNewEnabled" hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>{{loc("oldVsNew")}}
          <span class="filler"></span>
          <mat-icon>date_range</mat-icon>
          <mat-slide-toggle (change)="onOldVsNewChange($event)" [checked]="filters.oldNewEnabled" (click)="$event.stopPropagation()"></mat-slide-toggle>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <mat-form-field>
        <mat-label>{{loc("oldDays")}}</mat-label>
        <input matInput type="number" min="1" max="600" required  [(ngModel)]="filters.oldNewOldDays">
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{loc("newDays")}}</mat-label>
        <input matInput type="number" min="1" max="300" required [(ngModel)]="filters.oldNewNewDays">
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{loc("oldPercentage")}}</mat-label>
        <input matInput type="number" min="1" max="150" required [(ngModel)]="filters.oldNewOldPerc">
      </mat-form-field>
    </mat-expansion-panel>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <mat-expansion-panel [expanded]="filters.winPerEnabled" hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>{{loc("winningPercentage")}}
          <span class="filler"></span>
          <mat-icon>percent</mat-icon>
          <mat-slide-toggle (change)="onWinningPercentageChange($event)" [checked]="filters.winPerEnabled" (click)="$event.stopPropagation()"></mat-slide-toggle>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <mat-form-field>
        <mat-label>{{loc("days")}}</mat-label>
        <input matInput type="number" min="1" max="300" required [(ngModel)]="filters.winPerDays">
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{loc("winningPercValue")}}</mat-label>
        <input matInput type="number" min="1" max="100" required [(ngModel)]="filters.winPerValue">
      </mat-form-field>
    </mat-expansion-panel>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <mat-expansion-panel [expanded]="filters.equAvgEnabled" hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>{{loc("equityAverage")}}
          <span class="filler"></span>
          <mat-icon>ssid_chart</mat-icon>
          <mat-slide-toggle (change)="onEquityAverageChange($event)" [checked]="filters.equAvgEnabled" (click)="$event.stopPropagation()"></mat-slide-toggle>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <mat-form-field>
        <mat-label>{{loc("equityDays")}}</mat-label>
        <input matInput type="number" min="1" max="300" required [(ngModel)]="filters.equAvgDays">
      </mat-form-field>
    </mat-expansion-panel>

  </mat-accordion>

  <!-- ====================================================================== -->

  <div class="center-layout">
    <div>
      <button mat-button (click)="onRunClick()"     >{{button("run")}}</button>
      <button mat-button (click)="onOptimizeClick()">{{button("optimize")}}</button>
      <button mat-button (click)="onSaveClick()"    >{{button("save")}}</button>
      <button mat-button (click)="onReloadClick()"  >{{button("reload")}}</button>
    </div>

    <div class="chart-layout">
      <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start">
        <mat-tab label="{{tradingSystem.name}}">
          <simple-table #table class="table-panel"
                        [columns]    = "summaryColumns"
                        [data]       = "summaryData"
                        [searchPanel]= "false"
          ></simple-table>
        </mat-tab>
      </mat-tab-group>

      <canvas  id="equityChart"    >{{ equityChart }}</canvas>
      <canvas  id="activationChart">{{ activationChart }}</canvas>
    </div>

  </div>

  <!-- ====================================================================== -->

</div>
