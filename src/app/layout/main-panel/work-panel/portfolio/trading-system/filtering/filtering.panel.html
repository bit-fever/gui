<div class="main-layout">

  <mat-accordion class="left-layout" multi>
    <mat-expansion-panel [expanded]="filters.posProEnabled" hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>{{loc("positiveProfit")}}
          <span class="filler"></span>
          <mat-icon>functions</mat-icon>
          <mat-slide-toggle (change)="onPositiveProfitChange($event)" [checked]="filters.posProEnabled" (click)="$event.stopPropagation()"></mat-slide-toggle>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <mat-form-field>
        <mat-label>{{loc("weeks")}}</mat-label>
        <input matInput type="number" min="1" max="50" required [(ngModel)]="filters.posProWeeks">
      </mat-form-field>
    </mat-expansion-panel>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <mat-expansion-panel [expanded]="filters.shoLonEnabled" hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>{{loc("shortLongPeriods")}}
          <span class="filler"></span>
          <mat-icon>date_range</mat-icon>
          <mat-slide-toggle (change)="onShortLongPeriodsChange($event)" [checked]="filters.shoLonEnabled" (click)="$event.stopPropagation()"></mat-slide-toggle>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <mat-form-field>
        <mat-label>{{loc("shortPeriod")}}</mat-label>
        <input matInput type="number" min="1" max="50" required>
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{loc("longPeriod")}}</mat-label>
        <input matInput type="number" min="1" max="100" required>
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{loc("longPercentage")}}</mat-label>
        <input matInput type="number" min="1" max="100" required>
      </mat-form-field>
    </mat-expansion-panel>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <mat-expansion-panel [expanded]="filters.winPerEnabled" hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>{{loc("winningPercentage")}}
          <span class="filler"></span>
          <mat-icon>functions</mat-icon>
          <mat-slide-toggle (change)="onWinningPercentageChange($event)" [checked]="filters.winPerEnabled" (click)="$event.stopPropagation()"></mat-slide-toggle>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <mat-form-field>
        <mat-label>{{loc("weeks")}}</mat-label>
        <input matInput type="number" min="1" max="200" required [(ngModel)]="filters.winPerWeeks">
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{loc("winningPercValue")}}</mat-label>
        <input matInput type="number" min="1" max="100" required [(ngModel)]="filters.winPerValue">
      </mat-form-field>
    </mat-expansion-panel>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <mat-expansion-panel [expanded]="filters.equAvgEnabled" hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>{{loc("equityAverage")}}
          <span class="filler"></span>
          <mat-icon>functions</mat-icon>
          <mat-slide-toggle (change)="onEquityAverageChange($event)" [checked]="filters.equAvgEnabled" (click)="$event.stopPropagation()"></mat-slide-toggle>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <mat-form-field>
        <mat-label>{{loc("equityDays")}}</mat-label>
        <input matInput type="number" min="1" max="200" required [(ngModel)]="filters.equAvgDays">
      </mat-form-field>
    </mat-expansion-panel>

  </mat-accordion>

  <!-- ====================================================================== -->

  <div class="center-layout">
    <span class="title">{{tradingSystem.name}}</span>
    <mat-divider></mat-divider>

    <div>
      <button mat-button (click)="onRunClick()"     >{{button("run")}}</button>
      <button mat-button (click)="onOptimizeClick()">{{button("optimize")}}</button>
      <button mat-button (click)="onSaveClick()"    >{{button("save")}}</button>
      <button mat-button (click)="onReloadClick()"  >{{button("reload")}}</button>
    </div>

    <canvas  id="filteringChart">{{ chart }}</canvas>

    <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start">
      <mat-tab label="{{loc('summary')}}">
      </mat-tab>

      <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

      <mat-tab label="{{loc('analysis')}}">
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
