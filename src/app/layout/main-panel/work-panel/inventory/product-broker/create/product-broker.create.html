<div class="main-layout">
  <right-title-panel icon="currency_exchange" title="{{loc('new')}}" (onClose)="onClose()"></right-title-panel>

  <div class="form-layout">
    <select-required  #pbConnCtrl keyField="id" valueField="name"
                           [label]="mod('connectionCode')"
                           [(key)]  ="pb.connectionId"
                           [list]="connections"
                           (keyChange)="onConnectionChange($event)"></select-required><br/>
    <br/>
    <div *ngIf="status == Status.Local">
      <input-text-required   #pbSymbolCtrl       [label]="mod('symbol')"           [(value)]="pb.symbol"           [len]="16"></input-text-required><br/>
      <input-text-required   #pbNameCtrl         [label]="mod('name')"             [(value)]="pb.name"             [len]="64"></input-text-required><br/>
      <input-number-required #pbPointValueCtrl   [label]="mod('pointValue')"       [(value)]="pb.pointValue"       [min]="0"></input-number-required><br/>
      <input-number-required #pbCostPerOperCtrl  [label]="mod('costPerOperation')" [(value)]="pb.costPerOperation" [min]="0"></input-number-required><br/>
      <input-number-required #pbMarginValueCtrl  [label]="mod('marginValue')"      [(value)]="pb.marginValue"      [min]="0"></input-number-required><br/>
      <input-number-required #pbIncrementCtrl    [label]="mod('increment')"        [(value)]="pb.increment"        [min]="0.00000001" [max]="1"></input-number-required><br/>
      <select-required       #pbMarketCtrl       [label]="mod('marketType')"       [(key)]  ="pb.marketType"       [map]="markets"></select-required><br/>
      <select-required       #pbProductCtrl      [label]="mod('productType')"      [(key)]  ="pb.productType"      [map]="products"></select-required><br/>
      <select-required       #pbExchangeCtrl     [label]="mod('exchangeCode')"     [(key)]  ="pb.exchangeId"       keyField="id" valueField="code" [list]="exchanges"></select-required>
    </div>
  </div>

  <div class="buttons-layout">
    <mat-divider></mat-divider>
    <button mat-button (click)="onSave()" [disabled]="!saveEnabled()">{{button("save")}}</button>
    <button mat-button (click)="onPresets()" [disabled]="status != Status.Local">{{button("presets")}}</button>
    <button mat-button (click)="onClose()">{{button("cancel")}}</button>
  </div>
</div>

