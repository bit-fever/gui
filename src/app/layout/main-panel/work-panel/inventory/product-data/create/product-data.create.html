<div class="main-layout">
  <right-title-panel icon="dataset" title="{{loc('new')}}" (onClose)="onClose()"></right-title-panel>

  <div class="form-layout">
    <select-required #pdConnCtrl keyField="id" valueField="name"
                          [label]="mod('connectionCode')"
                          [(key)]="pd.connectionId"
                          [list]="connections"
                          (keyChange)="onConnectionChange($event)"></select-required>
    <br/>
    <div *ngIf="status != Status.Selecting">
      <text-selector                                          [label]="mod('symbol')"       [(value)]="pd.symbol" (click)="onSearch()" *ngIf="status == Status.Inventory"></text-selector>
      <input-text-required   #pdSymbolCtrl    [label]="mod('symbol')"       [(value)]="pd.symbol"      [len]="16" *ngIf="status == Status.Local"></input-text-required>
      <br/>
      <input-text-required   #pdNameCtrl      [label]="mod('name')"         [(value)]="pd.name"        [len]="64"></input-text-required><br/>
      <select-required       #pdMarketCtrl      [label]="mod('marketType')"   [(key)]  ="pd.marketType"  [map]="markets"></select-required><br/>
      <select-required       #pdProductCtrl     [label]="mod('productType')"  [(key)]  ="pd.productType" [map]="products"></select-required><br/>
      <select-required       #pdExchangeCtrl    [label]="mod('exchangeCode')" [(key)]  ="pd.exchangeId"  keyField="id" valueField="code" [list]="exchanges"></select-required>
    </div>
  </div>

  <div class="buttons-layout">
    <mat-divider></mat-divider>
    <button mat-button (click)="onSave()" [disabled]="!saveEnabled()">{{button("save")}}</button>
    <button mat-button (click)="onPresets()" [disabled]="status != Status.Local">{{button("presets")}}</button>
    <button mat-button (click)="onClose()">{{button("cancel")}}</button>
  </div>
</div>

